<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Predictive Maintenance - CF Manufacturing System</title>
    <link rel="stylesheet" href="common-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .maintenance-container {
            max-width: 1400px;
            margin: 0 auto;
            padding: var(--space-6);
        }

        .maintenance-header {
            background: linear-gradient(135deg, var(--primary-blue), var(--primary-blue-light));
            color: white;
            padding: var(--space-8);
            border-radius: var(--radius-xl);
            margin-bottom: var(--space-6);
            text-align: center;
            position: relative;
            overflow: hidden;
        }

        .maintenance-header::before {
            content: '';
            position: absolute;
            top: -50%;
            right: -20%;
            width: 300px;
            height: 300px;
            background: rgba(255,255,255,0.1);
            border-radius: 50%;
            animation: float 6s ease-in-out infinite;
        }

        @keyframes float {
            0%, 100% { transform: translateY(0px) rotate(0deg); }
            50% { transform: translateY(-20px) rotate(180deg); }
        }

        .maintenance-title {
            font-size: 2.5rem;
            margin-bottom: var(--space-4);
            font-weight: bold;
            position: relative;
            z-index: 2;
        }

        .maintenance-subtitle {
            font-size: 1.1rem;
            opacity: 0.9;
            position: relative;
            z-index: 2;
        }

        .overview-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-5);
            margin-bottom: var(--space-8);
        }

        .metric-card {
            background: white;
            padding: var(--space-6);
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            text-align: center;
            position: relative;
            transition: all 0.3s ease;
            border-top: 4px solid var(--success);
        }

        .metric-card:hover {
            transform: translateY(-5px);
            box-shadow: var(--shadow-xl);
        }

        .metric-card.warning { border-top-color: var(--warning); }
        .metric-card.critical { border-top-color: var(--error); }
        .metric-card.info { border-top-color: var(--info); }

        .metric-icon {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-3);
            font-size: 1.5rem;
            color: white;
            background: linear-gradient(135deg, var(--success), var(--success-light));
        }

        .metric-icon.warning { background: linear-gradient(135deg, var(--warning), var(--warning-light)); }
        .metric-icon.critical { background: linear-gradient(135deg, var(--error), var(--error-light)); }
        .metric-icon.info { background: linear-gradient(135deg, var(--info), var(--info-light)); }

        .metric-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: var(--space-2);
        }

        .metric-label {
            color: var(--gray-600);
            margin-bottom: var(--space-3);
            font-weight: 500;
        }

        .metric-trend {
            font-size: 0.9rem;
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-md);
            font-weight: 600;
        }

        .trend-positive {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .trend-negative {
            background: rgba(220, 38, 38, 0.1);
            color: var(--error);
        }

        .equipment-overview {
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-6);
            overflow: hidden;
        }

        .equipment-header {
            background: var(--gray-50);
            padding: var(--space-6);
            border-bottom: 2px solid var(--gray-200);
        }

        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 1px;
            background: var(--gray-200);
        }

        .equipment-card {
            background: white;
            padding: var(--space-5);
            cursor: pointer;
            transition: all 0.3s ease;
            position: relative;
            border-left: 4px solid transparent;
        }

        .equipment-card:hover {
            background: var(--gray-50);
            transform: scale(1.02);
        }

        .equipment-card.active {
            background: rgba(102, 126, 234, 0.05);
            border-left-color: var(--secondary-purple);
        }

        .equipment-card.healthy { border-left-color: var(--success); }
        .equipment-card.warning { border-left-color: var(--warning); }
        .equipment-card.critical { border-left-color: var(--error); }

        .equipment-name {
            font-size: 1.2rem;
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: var(--space-3);
            display: flex;
            align-items: center;
            gap: var(--space-2);
        }

        .status-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .status-healthy { background: var(--success); }
        .status-warning { background: var(--warning); }
        .status-critical { background: var(--error); }

        @keyframes pulse {
            0% { opacity: 1; }
            50% { opacity: 0.5; }
            100% { opacity: 1; }
        }

        .equipment-metrics {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-3);
            margin-bottom: var(--space-3);
        }

        .equipment-metric {
            text-align: center;
        }

        .equipment-metric-value {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-blue);
        }

        .equipment-metric-label {
            font-size: 0.8rem;
            color: var(--gray-600);
        }

        .equipment-alerts {
            background: rgba(245, 158, 11, 0.1);
            border-radius: var(--radius-md);
            padding: var(--space-3);
            margin-top: var(--space-3);
        }

        .alert-count {
            font-size: 0.9rem;
            color: var(--warning);
            font-weight: 600;
        }

        .equipment-details {
            display: none;
            background: white;
            border-radius: var(--radius-xl);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-6);
            overflow: hidden;
        }

        .equipment-details.active {
            display: block;
            animation: slideIn 0.5s ease-out;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .details-header {
            background: linear-gradient(135deg, var(--secondary-purple), var(--secondary-purple-light));
            color: white;
            padding: var(--space-6);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .details-title {
            font-size: 1.5rem;
            font-weight: 600;
        }

        .close-details {
            background: none;
            border: none;
            color: white;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            transition: all 0.3s ease;
        }

        .close-details:hover {
            background: rgba(255,255,255,0.2);
        }

        .details-tabs {
            display: flex;
            background: var(--gray-50);
            border-bottom: 2px solid var(--gray-200);
        }

        .details-tab {
            flex: 1;
            padding: var(--space-4);
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 500;
            border-bottom: 3px solid transparent;
        }

        .details-tab:hover {
            background: var(--gray-100);
        }

        .details-tab.active {
            background: white;
            border-bottom-color: var(--secondary-purple);
            color: var(--secondary-purple);
        }

        .details-content {
            display: none;
            padding: var(--space-6);
        }

        .details-content.active {
            display: block;
        }

        .oee-breakdown {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-5);
            margin-bottom: var(--space-6);
        }

        .oee-component {
            text-align: center;
            padding: var(--space-5);
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            border-top: 3px solid var(--info);
        }

        .oee-component.availability { border-top-color: var(--success); }
        .oee-component.performance { border-top-color: var(--warning); }
        .oee-component.quality { border-top-color: var(--info); }

        .oee-value {
            font-size: 3rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: var(--space-2);
        }

        .oee-label {
            font-weight: 600;
            color: var(--gray-700);
            margin-bottom: var(--space-2);
        }

        .oee-trend {
            font-size: 0.8rem;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
        }

        .parts-inventory {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-4);
            margin-bottom: var(--space-6);
        }

        .part-card {
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            transition: all 0.3s ease;
        }

        .part-card:hover {
            border-color: var(--secondary-purple);
            transform: translateY(-2px);
        }

        .part-card.low-stock { border-color: var(--error); }
        .part-card.reorder { border-color: var(--warning); }

        .part-name {
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: var(--space-2);
        }

        .part-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-2);
            font-size: 0.9rem;
        }

        .part-detail {
            display: flex;
            justify-content: space-between;
            padding: var(--space-1) 0;
            border-bottom: 1px solid var(--gray-200);
        }

        .staff-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: var(--space-4);
        }

        .staff-card {
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            text-align: center;
            transition: all 0.3s ease;
        }

        .staff-card:hover {
            border-color: var(--secondary-purple);
            transform: translateY(-2px);
        }

        .staff-avatar {
            width: 80px;
            height: 80px;
            border-radius: 50%;
            background: linear-gradient(135deg, var(--secondary-purple), var(--secondary-purple-light));
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto var(--space-3);
            color: white;
            font-size: 2rem;
        }

        .staff-name {
            font-weight: 600;
            color: var(--primary-blue);
            margin-bottom: var(--space-2);
        }

        .staff-skills {
            display: flex;
            flex-wrap: wrap;
            gap: var(--space-2);
            justify-content: center;
            margin-top: var(--space-3);
        }

        .skill-badge {
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-md);
            font-size: 0.8rem;
            font-weight: 600;
        }

        .skill-certified {
            background: rgba(16, 185, 129, 0.1);
            color: var(--success);
        }

        .skill-training {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .maintenance-timeline {
            position: relative;
            padding-left: var(--space-6);
        }

        .timeline-line {
            position: absolute;
            left: 20px;
            top: 0;
            bottom: 0;
            width: 2px;
            background: var(--gray-300);
        }

        .timeline-item {
            position: relative;
            margin-bottom: var(--space-5);
            background: white;
            border: 2px solid var(--gray-200);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
        }

        .timeline-dot {
            position: absolute;
            left: -32px;
            top: 20px;
            width: 16px;
            height: 16px;
            border-radius: 50%;
            background: var(--success);
            border: 3px solid white;
            box-shadow: 0 0 0 2px var(--gray-300);
        }

        .timeline-dot.maintenance { background: var(--info); }
        .timeline-dot.failure { background: var(--error); }
        .timeline-dot.inspection { background: var(--warning); }

        .maintenance-suggestions {
            background: linear-gradient(135deg, rgba(102, 126, 234, 0.05), rgba(118, 75, 162, 0.05));
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            margin-bottom: var(--space-6);
        }

        .suggestion-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            margin-bottom: var(--space-4);
            border-left: 4px solid var(--info);
            box-shadow: var(--shadow-sm);
        }

        .suggestion-card.high-priority { border-left-color: var(--error); }
        .suggestion-card.medium-priority { border-left-color: var(--warning); }

        .suggestion-header {
            display: flex;
            justify-content: between;
            align-items: flex-start;
            margin-bottom: var(--space-3);
        }

        .priority-badge {
            padding: var(--space-1) var(--space-3);
            border-radius: var(--radius-md);
            font-size: 0.8rem;
            font-weight: 600;
            text-transform: uppercase;
        }

        .priority-high {
            background: rgba(220, 38, 38, 0.1);
            color: var(--error);
        }

        .priority-medium {
            background: rgba(245, 158, 11, 0.1);
            color: var(--warning);
        }

        .priority-low {
            background: rgba(59, 130, 246, 0.1);
            color: var(--info);
        }

        @media (max-width: 768px) {
            .maintenance-container {
                padding: var(--space-4);
            }
            
            .maintenance-title {
                font-size: 2rem;
            }
            
            .details-tabs {
                flex-direction: column;
            }
            
            .oee-breakdown {
                grid-template-columns: 1fr;
            }
            
            .equipment-grid {
                grid-template-columns: 1fr;
            }
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-container">
        <div class="nav-content">
            <div class="nav-logo">
                <i class="fas fa-industry"></i>
                CF Manufacturing System
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-item">Home</a></li>
                <li><a href="carbon_fiber_dashboard.html" class="nav-item">Dashboard</a></li>
                <li><a href="machine-status.html" class="nav-item">Machines</a></li>
                <li><a href="product-traceability.html" class="nav-item">Traceability</a></li>
                <li><a href="operator-attendance.html" class="nav-item">Operators</a></li>
                <li><a href="quality-tracking.html" class="nav-item">Quality</a></li>
                <li><a href="correlation-analysis.html" class="nav-item">Analytics</a></li>
                <li><a href="energy-monitoring.html" class="nav-item">Energy</a></li>
                <li><a href="predictive-maintenance.html" class="nav-item active">Maintenance</a></li>
                <li><a href="chronological-review.html" class="nav-item">Timeline</a></li>
                <li><a href="reports.html" class="nav-item">Reports</a></li>
                <li><a href="settings.html" class="nav-item">Settings</a></li>
            </ul>
            <div class="nav-user">
                <i class="fas fa-user-circle" style="font-size: 1.5rem;"></i>
                <span>John Doe</span>
            </div>
        </div>
    </nav>

    <div class="maintenance-container">
        <!-- Maintenance Header -->
        <div class="maintenance-header">
            <h1 class="maintenance-title">
                <i class="fas fa-cog"></i>
                Predictive Maintenance System
            </h1>
            <p class="maintenance-subtitle">
                AI-Powered Equipment Health Monitoring & Predictive Analytics for Carbon Fiber Manufacturing
            </p>
        </div>

        <!-- Overview Metrics -->
        <div class="overview-metrics">
            <div class="metric-card">
                <div class="metric-icon">
                    <i class="fas fa-chart-line"></i>
                </div>
                <div class="metric-value">94.2%</div>
                <div class="metric-label">Overall OEE</div>
                <div class="metric-trend trend-positive">
                    <i class="fas fa-arrow-up"></i> +2.3% vs Last Month
                </div>
            </div>
            
            <div class="metric-card warning">
                <div class="metric-icon warning">
                    <i class="fas fa-exclamation-triangle"></i>
                </div>
                <div class="metric-value">3</div>
                <div class="metric-label">Critical Alerts</div>
                <div class="metric-trend trend-negative">
                    <i class="fas fa-arrow-up"></i> +1 New Alert
                </div>
            </div>
            
            <div class="metric-card info">
                <div class="metric-icon info">
                    <i class="fas fa-wrench"></i>
                </div>
                <div class="metric-value">12</div>
                <div class="metric-label">Scheduled Maintenance</div>
                <div class="metric-trend trend-positive">
                    <i class="fas fa-arrow-down"></i> -3 Overdue Items
                </div>
            </div>
            
            <div class="metric-card critical">
                <div class="metric-icon critical">
                    <i class="fas fa-boxes"></i>
                </div>
                <div class="metric-value">7</div>
                <div class="metric-label">Low Stock Parts</div>
                <div class="metric-trend trend-negative">
                    <i class="fas fa-arrow-up"></i> +2 Critical Items
                </div>
            </div>
        </div>

        <!-- Equipment Overview -->
        <div class="equipment-overview">
            <div class="equipment-header">
                <h2 style="color: var(--primary-blue); margin: 0; display: flex; align-items: center; gap: var(--space-3);">
                    <i class="fas fa-industry"></i>
                    Equipment Health Dashboard
                </h2>
                <p style="color: var(--gray-600); margin-top: var(--space-2);">Click on any equipment to view detailed analysis and maintenance recommendations</p>
            </div>
            
            <div class="equipment-grid">
                <div class="equipment-card healthy" onclick="showEquipmentDetails('spinning-unit-1')">
                    <div class="equipment-name">
                        <span class="status-indicator status-healthy"></span>
                        Spinning Unit 1
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="equipment-metric-value">96.8%</div>
                            <div class="equipment-metric-label">OEE</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="equipment-metric-value">142</div>
                            <div class="equipment-metric-label">kg/hr</div>
                        </div>
                    </div>
                    <div class="equipment-alerts">
                        <div class="alert-count">
                            <i class="fas fa-info-circle"></i> 1 Scheduled Maintenance
                        </div>
                    </div>
                </div>

                <div class="equipment-card warning" onclick="showEquipmentDetails('stabilization-furnace')">
                    <div class="equipment-name">
                        <span class="status-indicator status-warning"></span>
                        Stabilization Furnace
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="equipment-metric-value">87.3%</div>
                            <div class="equipment-metric-label">OEE</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="equipment-metric-value">248°C</div>
                            <div class="equipment-metric-label">Temp</div>
                        </div>
                    </div>
                    <div class="equipment-alerts">
                        <div class="alert-count">
                            <i class="fas fa-exclamation-triangle"></i> 2 Temperature Warnings
                        </div>
                    </div>
                </div>

                <div class="equipment-card healthy" onclick="showEquipmentDetails('carbonization-furnace')">
                    <div class="equipment-name">
                        <span class="status-indicator status-healthy"></span>
                        Carbonization Furnace
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="equipment-metric-value">94.2%</div>
                            <div class="equipment-metric-label">OEE</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="equipment-metric-value">1350°C</div>
                            <div class="equipment-metric-label">Temp</div>
                        </div>
                    </div>
                    <div class="equipment-alerts">
                        <div class="alert-count">
                            <i class="fas fa-check-circle"></i> All Systems Normal
                        </div>
                    </div>
                </div>

                <div class="equipment-card critical" onclick="showEquipmentDetails('surface-treatment')">
                    <div class="equipment-name">
                        <span class="status-indicator status-critical"></span>
                        Surface Treatment Unit
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="equipment-metric-value">78.9%</div>
                            <div class="equipment-metric-label">OEE</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="equipment-metric-value">85%</div>
                            <div class="equipment-metric-label">Uptime</div>
                        </div>
                    </div>
                    <div class="equipment-alerts">
                        <div class="alert-count">
                            <i class="fas fa-times-circle"></i> 1 Critical Failure Risk
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Equipment Details (Hidden by default) -->
        <div class="equipment-details" id="equipment-details">
            <div class="details-header">
                <div class="details-title" id="details-title">Equipment Details</div>
                <button class="close-details" onclick="hideEquipmentDetails()">
                    <i class="fas fa-times"></i>
                </button>
            </div>
            
            <div class="details-tabs">
                <div class="details-tab active" onclick="switchDetailsTab(0)">
                    <i class="fas fa-chart-pie"></i> OEE Analysis
                </div>
                <div class="details-tab" onclick="switchDetailsTab(1)">
                    <i class="fas fa-boxes"></i> Parts Inventory
                </div>
                <div class="details-tab" onclick="switchDetailsTab(2)">
                    <i class="fas fa-users"></i> Maintenance Staff
                </div>
                <div class="details-tab" onclick="switchDetailsTab(3)">
                    <i class="fas fa-history"></i> Maintenance History
                </div>
                <div class="details-tab" onclick="switchDetailsTab(4)">
                    <i class="fas fa-robot"></i> AI Suggestions
                </div>
            </div>

            <!-- OEE Analysis Tab -->
            <div class="details-content active" id="details-tab-0">
                <h3 style="color: var(--primary-blue); margin-bottom: var(--space-5);">
                    <i class="fas fa-chart-pie"></i> OEE Breakdown Analysis
                </h3>
                
                <div class="oee-breakdown">
                    <div class="oee-component availability">
                        <div class="oee-value" id="availability-value">94.2%</div>
                        <div class="oee-label">Availability</div>
                        <div class="oee-trend trend-positive">
                            <i class="fas fa-arrow-up"></i> +1.2%
                        </div>
                    </div>
                    <div class="oee-component performance">
                        <div class="oee-value" id="performance-value">91.7%</div>
                        <div class="oee-label">Performance</div>
                        <div class="oee-trend trend-negative">
                            <i class="fas fa-arrow-down"></i> -0.8%
                        </div>
                    </div>
                    <div class="oee-component quality">
                        <div class="oee-value" id="quality-value">98.9%</div>
                        <div class="oee-label">Quality</div>
                        <div class="oee-trend trend-positive">
                            <i class="fas fa-arrow-up"></i> +0.5%
                        </div>
                    </div>
                </div>
                
                <div style="background: white; padding: var(--space-4); border-radius: var(--radius-lg); box-shadow: var(--shadow-sm);">
                    <div style="height: 400px;">
                        <canvas id="oeeChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Parts Inventory Tab -->
            <div class="details-content" id="details-tab-1">
                <h3 style="color: var(--primary-blue); margin-bottom: var(--space-5);">
                    <i class="fas fa-boxes"></i> Critical Parts Inventory Status
                </h3>
                
                <div class="parts-inventory" id="parts-inventory">
                    <!-- Parts will be populated by JavaScript -->
                </div>
            </div>

            <!-- Maintenance Staff Tab -->
            <div class="details-content" id="details-tab-2">
                <h3 style="color: var(--primary-blue); margin-bottom: var(--space-5);">
                    <i class="fas fa-users"></i> Qualified Maintenance Staff
                </h3>
                
                <div class="staff-grid" id="staff-grid">
                    <!-- Staff will be populated by JavaScript -->
                </div>
            </div>

            <!-- Maintenance History Tab -->
            <div class="details-content" id="details-tab-3">
                <h3 style="color: var(--primary-blue); margin-bottom: var(--space-5);">
                    <i class="fas fa-history"></i> Maintenance & Failure History
                </h3>
                
                <div class="maintenance-timeline" id="maintenance-timeline">
                    <!-- Timeline will be populated by JavaScript -->
                </div>
            </div>

            <!-- AI Suggestions Tab -->
            <div class="details-content" id="details-tab-4">
                <h3 style="color: var(--primary-blue); margin-bottom: var(--space-5);">
                    <i class="fas fa-robot"></i> AI-Powered Maintenance Recommendations
                </h3>
                
                <div class="maintenance-suggestions" id="maintenance-suggestions">
                    <!-- Suggestions will be populated by JavaScript -->
                </div>
            </div>
        </div>
    </div>

    <script>
        // Global variables
        let currentEquipment = null;
        let currentDetailsTab = 0;
        
        // Equipment data
        const equipmentData = {
            'spinning-unit-1': {
                name: 'Spinning Unit 1',
                status: 'healthy',
                oee: {
                    overall: 96.8,
                    availability: 98.2,
                    performance: 97.5,
                    quality: 101.2
                },
                parts: [
                    { name: 'Spinneret Assembly', current: 12, minimum: 8, status: 'good', lastChanged: '2024-10-15' },
                    { name: 'Drive Motor Bearings', current: 6, minimum: 4, status: 'good', lastChanged: '2024-11-01' },
                    { name: 'Polymer Feed Pump', current: 2, minimum: 3, status: 'low', lastChanged: '2024-09-20' },
                    { name: 'Temperature Sensors', current: 8, minimum: 6, status: 'good', lastChanged: '2024-11-10' }
                ],
                staff: [
                    { name: 'Mike Johnson', skills: ['Mechanical', 'Electrical'], certifications: ['CF Process', 'Safety'] },
                    { name: 'Sarah Chen', skills: ['Mechanical', 'Hydraulics'], certifications: ['CF Process', 'Advanced Maint'] },
                    { name: 'David Wilson', skills: ['Electrical'], certifications: ['Safety'], training: ['CF Process'] }
                ],
                history: [
                    { date: '2024-12-01', type: 'maintenance', description: 'Routine lubrication and alignment check', duration: '2 hours' },
                    { date: '2024-11-15', type: 'inspection', description: 'Monthly safety inspection completed', duration: '1 hour' },
                    { date: '2024-10-28', type: 'maintenance', description: 'Spinneret cleaning and calibration', duration: '4 hours' },
                    { date: '2024-10-15', type: 'replacement', description: 'Spinneret assembly replacement', duration: '6 hours' }
                ],
                suggestions: [
                    { priority: 'medium', title: 'Polymer Feed Pump Replacement', description: 'Stock is below minimum threshold. Recommend ordering 2 replacement units within 2 weeks.', action: 'Order spare parts', impact: 'Prevent potential 8-hour downtime' },
                    { priority: 'low', title: 'Performance Optimization', description: 'Slight decrease in performance efficiency detected. Schedule alignment check.', action: 'Schedule maintenance', impact: 'Improve OEE by 1-2%' }
                ]
            },
            'stabilization-furnace': {
                name: 'Stabilization Furnace',
                status: 'warning',
                oee: {
                    overall: 87.3,
                    availability: 94.8,
                    performance: 89.2,
                    quality: 103.2
                },
                parts: [
                    { name: 'Heating Elements', current: 8, minimum: 6, status: 'good', lastChanged: '2024-09-05' },
                    { name: 'Insulation Panels', current: 4, minimum: 6, status: 'critical', lastChanged: '2024-07-20' },
                    { name: 'Temperature Controllers', current: 3, minimum: 2, status: 'good', lastChanged: '2024-10-20' },
                    { name: 'Air Circulation Fans', current: 2, minimum: 4, status: 'low', lastChanged: '2024-08-15' }
                ],
                staff: [
                    { name: 'Robert Martinez', skills: ['Thermal Systems', 'Controls'], certifications: ['High Temp', 'Safety'] },
                    { name: 'Lisa Wang', skills: ['Thermal Systems', 'Mechanical'], certifications: ['High Temp', 'CF Process'] },
                    { name: 'Tom Anderson', skills: ['Controls', 'Electrical'], certifications: ['Safety'], training: ['High Temp'] }
                ],
                history: [
                    { date: '2024-11-28', type: 'failure', description: 'Temperature controller malfunction - emergency repair', duration: '12 hours' },
                    { date: '2024-11-20', type: 'maintenance', description: 'Heating element inspection and cleaning', duration: '6 hours' },
                    { date: '2024-11-10', type: 'maintenance', description: 'Insulation inspection - found degradation', duration: '3 hours' },
                    { date: '2024-10-25', type: 'inspection', description: 'Monthly thermal efficiency check', duration: '2 hours' }
                ],
                suggestions: [
                    { priority: 'high', title: 'Critical Insulation Panel Replacement', description: 'Insulation panels are critically low and showing degradation. Immediate replacement required.', action: 'Emergency procurement', impact: 'Prevent thermal efficiency loss' },
                    { priority: 'high', title: 'Air Circulation Fan Procurement', description: 'Fan inventory below minimum. Risk of temperature uniformity issues.', action: 'Rush order fans', impact: 'Maintain temperature stability' },
                    { priority: 'medium', title: 'Temperature Controller Redundancy', description: 'Recent failure indicates need for backup controller installation.', action: 'Install backup system', impact: 'Reduce failure risk by 80%' }
                ]
            }
            // Add more equipment data as needed
        };

        // Initialize charts
        function initCharts() {
            // This will be called when equipment details are shown
        }

        // Show equipment details
        function showEquipmentDetails(equipmentId) {
            currentEquipment = equipmentId;
            const equipment = equipmentData[equipmentId];
            
            if (!equipment) return;
            
            // Update details title
            document.getElementById('details-title').textContent = equipment.name + ' - Detailed Analysis';
            
            // Update OEE values
            document.getElementById('availability-value').textContent = equipment.oee.availability.toFixed(1) + '%';
            document.getElementById('performance-value').textContent = equipment.oee.performance.toFixed(1) + '%';
            document.getElementById('quality-value').textContent = equipment.oee.quality.toFixed(1) + '%';
            
            // Show details panel
            document.getElementById('equipment-details').classList.add('active');
            
            // Mark selected equipment as active
            document.querySelectorAll('.equipment-card').forEach(card => card.classList.remove('active'));
            event.target.closest('.equipment-card').classList.add('active');
            
            // Populate data for all tabs
            populatePartsInventory();
            populateStaffGrid();
            populateMaintenanceHistory();
            populateMaintenanceSuggestions();
            
            // Initialize/update OEE chart
            setTimeout(updateOEEChart, 300);
        }

        // Hide equipment details
        function hideEquipmentDetails() {
            document.getElementById('equipment-details').classList.remove('active');
            document.querySelectorAll('.equipment-card').forEach(card => card.classList.remove('active'));
            currentEquipment = null;
        }

        // Switch details tabs
        function switchDetailsTab(tabIndex) {
            // Remove active class from all tabs and content
            document.querySelectorAll('.details-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.details-content').forEach(content => content.classList.remove('active'));
            
            // Add active class to selected tab and content
            document.querySelectorAll('.details-tab')[tabIndex].classList.add('active');
            document.getElementById(`details-tab-${tabIndex}`).classList.add('active');
            
            currentDetailsTab = tabIndex;
            
            // Update chart if on OEE tab
            if (tabIndex === 0 && currentEquipment) {
                setTimeout(updateOEEChart, 100);
            }
        }

        // Update OEE Chart
        function updateOEEChart() {
            if (!currentEquipment) return;
            
            const equipment = equipmentData[currentEquipment];
            const ctx = document.getElementById('oeeChart').getContext('2d');
            
            // Destroy existing chart
            if (window.oeeChartInstance) {
                window.oeeChartInstance.destroy();
            }
            
            window.oeeChartInstance = new Chart(ctx, {
                type: 'line',
                data: {
                    labels: ['Week 1', 'Week 2', 'Week 3', 'Week 4', 'Current'],
                    datasets: [{
                        label: 'Overall OEE (%)',
                        data: [92.1, 93.5, 94.8, 95.2, equipment.oee.overall],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Availability (%)',
                        data: [96.8, 97.2, 97.8, 98.1, equipment.oee.availability],
                        borderColor: '#10b981',
                        backgroundColor: 'rgba(16, 185, 129, 0.1)',
                        tension: 0.4,
                        fill: false
                    }, {
                        label: 'Performance (%)',
                        data: [89.2, 91.1, 93.5, 94.8, equipment.oee.performance],
                        borderColor: '#f59e0b',
                        backgroundColor: 'rgba(245, 158, 11, 0.1)',
                        tension: 0.4,
                        fill: false
                    }, {
                        label: 'Quality (%)',
                        data: [106.2, 104.8, 103.1, 102.4, equipment.oee.quality],
                        borderColor: '#3b82f6',
                        backgroundColor: 'rgba(59, 130, 246, 0.1)',
                        tension: 0.4,
                        fill: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: {
                            position: 'top'
                        },
                        tooltip: {
                            mode: 'index',
                            intersect: false
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: false,
                            min: 80,
                            max: 110,
                            title: {
                                display: true,
                                text: 'Percentage (%)'
                            }
                        }
                    }
                }
            });
        }

        // Populate parts inventory
        function populatePartsInventory() {
            if (!currentEquipment) return;
            
            const equipment = equipmentData[currentEquipment];
            const container = document.getElementById('parts-inventory');
            
            container.innerHTML = equipment.parts.map(part => {
                const statusClass = part.status === 'critical' ? 'low-stock' : part.status === 'low' ? 'reorder' : '';
                const statusIcon = part.status === 'critical' ? 'fas fa-exclamation-circle' : part.status === 'low' ? 'fas fa-exclamation-triangle' : 'fas fa-check-circle';
                const statusColor = part.status === 'critical' ? 'var(--error)' : part.status === 'low' ? 'var(--warning)' : 'var(--success)';
                
                return `
                    <div class="part-card ${statusClass}">
                        <div class="part-name">${part.name}</div>
                        <div class="part-details">
                            <div class="part-detail">
                                <span>Current Stock:</span>
                                <span style="font-weight: bold;">${part.current} units</span>
                            </div>
                            <div class="part-detail">
                                <span>Minimum Required:</span>
                                <span>${part.minimum} units</span>
                            </div>
                            <div class="part-detail">
                                <span>Last Changed:</span>
                                <span>${part.lastChanged}</span>
                            </div>
                            <div class="part-detail">
                                <span>Status:</span>
                                <span style="color: ${statusColor};">
                                    <i class="${statusIcon}"></i> ${part.status.charAt(0).toUpperCase() + part.status.slice(1)}
                                </span>
                            </div>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Populate staff grid
        function populateStaffGrid() {
            if (!currentEquipment) return;
            
            const equipment = equipmentData[currentEquipment];
            const container = document.getElementById('staff-grid');
            
            container.innerHTML = equipment.staff.map(staff => {
                const initials = staff.name.split(' ').map(n => n.charAt(0)).join('');
                
                const skillBadges = [
                    ...staff.skills.map(skill => `<span class="skill-badge skill-certified">${skill}</span>`),
                    ...staff.certifications.map(cert => `<span class="skill-badge skill-certified">${cert}</span>`),
                    ...(staff.training || []).map(training => `<span class="skill-badge skill-training">${training} (Training)</span>`)
                ].join('');
                
                return `
                    <div class="staff-card">
                        <div class="staff-avatar">${initials}</div>
                        <div class="staff-name">${staff.name}</div>
                        <div style="font-size: 0.9rem; color: var(--gray-600); margin-bottom: var(--space-2);">
                            Maintenance Technician
                        </div>
                        <div class="staff-skills">
                            ${skillBadges}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Populate maintenance history
        function populateMaintenanceHistory() {
            if (!currentEquipment) return;
            
            const equipment = equipmentData[currentEquipment];
            const container = document.getElementById('maintenance-timeline');
            
            container.innerHTML = equipment.history.map(item => {
                const dotClass = item.type === 'failure' ? 'failure' : item.type === 'maintenance' ? 'maintenance' : 'inspection';
                const icon = item.type === 'failure' ? 'fas fa-times' : item.type === 'maintenance' ? 'fas fa-wrench' : 'fas fa-search';
                
                return `
                    <div class="timeline-item">
                        <div class="timeline-dot ${dotClass}"></div>
                        <div style="display: flex; justify-content: space-between; align-items: flex-start; margin-bottom: var(--space-2);">
                            <h4 style="color: var(--primary-blue); margin: 0;">
                                <i class="${icon}"></i> ${item.type.charAt(0).toUpperCase() + item.type.slice(1)}
                            </h4>
                            <span style="color: var(--gray-500); font-size: 0.9rem;">${item.date}</span>
                        </div>
                        <p style="color: var(--gray-700); margin-bottom: var(--space-2);">${item.description}</p>
                        <div style="font-size: 0.8rem; color: var(--gray-600);">
                            <i class="fas fa-clock"></i> Duration: ${item.duration}
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Populate maintenance suggestions
        function populateMaintenanceSuggestions() {
            if (!currentEquipment) return;
            
            const equipment = equipmentData[currentEquipment];
            const container = document.getElementById('maintenance-suggestions');
            
            container.innerHTML = equipment.suggestions.map(suggestion => {
                return `
                    <div class="suggestion-card ${suggestion.priority}-priority">
                        <div class="suggestion-header">
                            <h4 style="color: var(--primary-blue); margin: 0; flex: 1;">${suggestion.title}</h4>
                            <span class="priority-badge priority-${suggestion.priority}">${suggestion.priority} Priority</span>
                        </div>
                        <p style="color: var(--gray-700); margin: var(--space-3) 0;">${suggestion.description}</p>
                        <div style="display: flex; justify-content: space-between; align-items: center; margin-top: var(--space-4);">
                            <div style="flex: 1;">
                                <div style="font-size: 0.9rem; color: var(--gray-600); margin-bottom: var(--space-1);">
                                    <strong>Recommended Action:</strong> ${suggestion.action}
                                </div>
                                <div style="font-size: 0.9rem; color: var(--gray-600);">
                                    <strong>Expected Impact:</strong> ${suggestion.impact}
                                </div>
                            </div>
                            <button style="background: var(--secondary-purple); color: white; border: none; padding: var(--space-2) var(--space-4); border-radius: var(--radius-md); cursor: pointer; margin-left: var(--space-4);">
                                <i class="fas fa-check"></i> Approve
                            </button>
                        </div>
                    </div>
                `;
            }).join('');
        }

        // Real-time data simulation
        function simulateRealTimeUpdates() {
            // Update metric values slightly
            const metrics = document.querySelectorAll('.metric-value');
            // Add subtle animations or value updates
            console.log('Updating real-time maintenance data...');
        }

        // Initialize page
        document.addEventListener('DOMContentLoaded', function() {
            // Set current date
            const today = new Date().toISOString().split('T')[0];
            
            // Start real-time updates
            setInterval(simulateRealTimeUpdates, 30000); // Update every 30 seconds
            
            // Initialize with first equipment if needed
            // showEquipmentDetails('spinning-unit-1');
        });

        // Close details when clicking outside
        document.addEventListener('click', function(event) {
            const detailsPanel = document.getElementById('equipment-details');
            const equipmentCards = document.querySelectorAll('.equipment-card');
            
            if (!detailsPanel.contains(event.target) && 
                !Array.from(equipmentCards).some(card => card.contains(event.target))) {
                // hideEquipmentDetails();
            }
        });
    </script>
</body>
</html>