<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Energy Monitoring - CF Manufacturing</title>
    <link rel="stylesheet" href="common-styles.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
    <style>
        .energy-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: var(--space-5);
            margin-bottom: var(--space-6);
        }

        .energy-card {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-md);
            position: relative;
            overflow: hidden;
        }

        .energy-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
        }

        .energy-card.excellent::before { background: linear-gradient(90deg, var(--success), var(--success-light)); }
        .energy-card.good::before { background: linear-gradient(90deg, var(--info), var(--info-light)); }
        .energy-card.warning::before { background: linear-gradient(90deg, var(--warning), var(--warning-light)); }
        .energy-card.critical::before { background: linear-gradient(90deg, var(--error), var(--error-light)); }

        .energy-header {
            display: flex;
            justify-content: space-between;
            align-items: flex-start;
            margin-bottom: var(--space-4);
        }

        .energy-title {
            font-size: 1.1rem;
            font-weight: 600;
            color: var(--primary-blue);
        }

        .energy-icon {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.5rem;
            color: white;
            background: linear-gradient(135deg, var(--success), var(--success-light));
        }

        .energy-value {
            font-size: 2.5rem;
            font-weight: bold;
            color: var(--primary-blue);
            text-align: center;
            margin: var(--space-4) 0;
        }

        .energy-details {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: var(--space-3);
            font-size: 0.9rem;
        }

        .detail-item {
            display: flex;
            justify-content: space-between;
            padding: var(--space-2) 0;
            border-bottom: 1px solid var(--gray-200);
        }

        .detail-item:last-child {
            border-bottom: none;
        }

        .detail-label {
            color: var(--gray-600);
        }

        .detail-value {
            font-weight: 600;
            color: var(--gray-800);
        }

        .trend-indicator {
            display: flex;
            align-items: center;
            gap: var(--space-1);
            font-size: 0.8rem;
            margin-top: var(--space-2);
            justify-content: center;
        }

        .trend-up { color: var(--error); }
        .trend-down { color: var(--success); }
        .trend-neutral { color: var(--gray-500); }

        .consumption-breakdown {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-6);
        }

        .equipment-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(280px, 1fr));
            gap: var(--space-4);
            margin-top: var(--space-5);
        }

        .equipment-card {
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            padding: var(--space-4);
            border-left: 4px solid var(--info);
            transition: all 0.3s ease;
        }

        .equipment-card:hover {
            transform: translateY(-2px);
            box-shadow: var(--shadow-md);
        }

        .equipment-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-3);
        }

        .equipment-name {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .power-indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            animation: pulse 2s infinite;
        }

        .power-on { background: var(--success); }
        .power-standby { background: var(--warning); }
        .power-off { background: var(--gray-400); animation: none; }

        .equipment-metrics {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: var(--space-2);
        }

        .equipment-metric {
            text-align: center;
            padding: var(--space-2);
            background: white;
            border-radius: var(--radius-md);
        }

        .metric-value {
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: var(--space-1);
        }

        .metric-label {
            font-size: 0.8rem;
            color: var(--gray-600);
        }

        .efficiency-analysis {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-6);
        }

        .efficiency-tabs {
            display: flex;
            border-bottom: 2px solid var(--gray-200);
            margin-bottom: var(--space-5);
        }

        .efficiency-tab {
            padding: var(--space-3) var(--space-6);
            cursor: pointer;
            border-bottom: 3px solid transparent;
            transition: all 0.3s ease;
            font-weight: 500;
        }

        .efficiency-tab.active {
            border-bottom-color: var(--secondary-purple);
            color: var(--secondary-purple);
            background: rgba(102, 126, 234, 0.05);
        }

        .efficiency-content {
            display: none;
        }

        .efficiency-content.active {
            display: block;
        }

        .efficiency-metrics {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: var(--space-4);
            margin-bottom: var(--space-5);
        }

        .efficiency-card {
            background: var(--gray-50);
            padding: var(--space-4);
            border-radius: var(--radius-lg);
            text-align: center;
        }

        .efficiency-score {
            font-size: 2rem;
            font-weight: bold;
            margin-bottom: var(--space-2);
        }

        .score-excellent { color: var(--success); }
        .score-good { color: var(--info); }
        .score-average { color: var(--warning); }
        .score-poor { color: var(--error); }

        .cost-analysis {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-6);
        }

        .cost-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: var(--space-5);
            margin-top: var(--space-5);
        }

        .cost-card {
            background: var(--gray-50);
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            border-left: 4px solid var(--warning);
        }

        .cost-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }

        .cost-title {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .cost-period {
            padding: var(--space-1) var(--space-2);
            background: var(--warning);
            color: white;
            border-radius: var(--radius-sm);
            font-size: 0.8rem;
        }

        .cost-amount {
            font-size: 2rem;
            font-weight: bold;
            color: var(--warning);
            text-align: center;
            margin: var(--space-4) 0;
        }

        .cost-breakdown {
            background: white;
            padding: var(--space-3);
            border-radius: var(--radius-md);
        }

        .breakdown-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: var(--space-2) 0;
            border-bottom: 1px solid var(--gray-200);
        }

        .breakdown-item:last-child {
            border-bottom: none;
        }

        .optimization-section {
            background: linear-gradient(135deg, rgba(16, 185, 129, 0.05), rgba(52, 211, 153, 0.05));
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-md);
            border-left: 5px solid var(--success);
            margin-bottom: var(--space-6);
        }

        .optimization-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: var(--space-5);
            margin-top: var(--space-5);
        }

        .optimization-card {
            background: white;
            border-radius: var(--radius-lg);
            padding: var(--space-5);
            box-shadow: var(--shadow-sm);
        }

        .optimization-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-4);
        }

        .optimization-title {
            font-weight: 600;
            color: var(--primary-blue);
        }

        .savings-potential {
            padding: var(--space-2) var(--space-3);
            background: var(--success);
            color: white;
            border-radius: var(--radius-md);
            font-weight: 600;
            font-size: 0.9rem;
        }

        .optimization-description {
            color: var(--gray-700);
            margin-bottom: var(--space-4);
            line-height: 1.5;
        }

        .optimization-actions {
            background: var(--gray-50);
            padding: var(--space-3);
            border-radius: var(--radius-md);
        }

        .action-list {
            list-style: none;
            padding: 0;
        }

        .action-item {
            display: flex;
            align-items: center;
            margin-bottom: var(--space-2);
            font-size: 0.9rem;
        }

        .action-item:last-child {
            margin-bottom: 0;
        }

        .action-item i {
            color: var(--success);
            margin-right: var(--space-2);
            width: 16px;
        }

        .alerts-panel {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-md);
            border-left: 5px solid var(--warning);
        }

        .energy-alerts {
            display: flex;
            flex-direction: column;
            gap: var(--space-3);
        }

        .energy-alert {
            display: flex;
            align-items: center;
            gap: var(--space-3);
            background: var(--gray-50);
            padding: var(--space-4);
            border-radius: var(--radius-lg);
        }

        .alert-severity {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 1.2rem;
            color: white;
        }

        .severity-high { background: var(--error); }
        .severity-medium { background: var(--warning); }
        .severity-low { background: var(--info); }

        .alert-content {
            flex: 1;
        }

        .alert-title {
            font-weight: 600;
            margin-bottom: var(--space-1);
        }

        .alert-description {
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .real-time-section {
            background: white;
            border-radius: var(--radius-xl);
            padding: var(--space-6);
            box-shadow: var(--shadow-md);
            margin-bottom: var(--space-6);
        }

        .realtime-grid {
            display: grid;
            grid-template-columns: 2fr 1fr;
            gap: var(--space-6);
            margin-top: var(--space-5);
        }

        .power-gauge {
            position: relative;
            width: 200px;
            height: 200px;
            margin: 0 auto;
        }

        .gauge-circle {
            width: 100%;
            height: 100%;
            border: 8px solid var(--gray-200);
            border-radius: 50%;
            position: relative;
        }

        .gauge-fill {
            position: absolute;
            top: -8px;
            left: -8px;
            width: 100%;
            height: 100%;
            border: 8px solid var(--success);
            border-radius: 50%;
            clip-path: circle(50% at 50% 50%);
            transform: rotate(-90deg);
        }

        .gauge-center {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            text-align: center;
        }

        .gauge-value {
            font-size: 2rem;
            font-weight: bold;
            color: var(--primary-blue);
            margin-bottom: var(--space-1);
        }

        .gauge-label {
            font-size: 0.9rem;
            color: var(--gray-600);
        }

        .realtime-stats {
            display: flex;
            flex-direction: column;
            gap: var(--space-4);
        }

        .realtime-stat {
            background: var(--gray-50);
            padding: var(--space-4);
            border-radius: var(--radius-lg);
        }

        .stat-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: var(--space-2);
        }

        .stat-name {
            font-weight: 600;
            color: var(--gray-700);
        }

        .stat-trend {
            font-size: 0.8rem;
            padding: var(--space-1) var(--space-2);
            border-radius: var(--radius-sm);
        }

        .stat-current {
            font-size: 1.5rem;
            font-weight: bold;
            color: var(--primary-blue);
        }
    </style>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav-container">
        <div class="nav-content">
            <div class="nav-logo">
                <i class="fas fa-industry"></i>
                CF Manufacturing System
            </div>
            <ul class="nav-menu">
                <li><a href="index.html" class="nav-item">Home</a></li>
                <li><a href="carbon_fiber_dashboard.html" class="nav-item">Dashboard</a></li>
                <li><a href="machine-status.html" class="nav-item">Machines</a></li>
                <li><a href="product-traceability.html" class="nav-item">Traceability</a></li>
                <li><a href="operator-attendance.html" class="nav-item">Operators</a></li>
                <li><a href="quality-tracking.html" class="nav-item">Quality</a></li>
                <li><a href="correlation-analysis.html" class="nav-item">Analytics</a></li>
                <li><a href="energy-monitoring.html" class="nav-item active">Energy</a></li>
                <li><a href="chronological-review.html" class="nav-item">Timeline</a></li>
                <li><a href="predictive-maintenance.html" class="nav-item">Maintenance</a></li>
                <li><a href="reports.html" class="nav-item">Reports</a></li>
                <li><a href="settings.html" class="nav-item">Settings</a></li>
            </ul>
            <div class="nav-user">
                <i class="fas fa-user-circle" style="font-size: 1.5rem;"></i>
                <span>John Doe</span>
            </div>
        </div>
    </nav>

    <div class="dashboard-container">
        <!-- Page Header -->
        <div class="page-header">
            <h1 class="page-title">
                <i class="fas fa-bolt"></i>
                Energy Monitoring & Optimization
            </h1>
            <div class="breadcrumb">Dashboard / Energy Monitoring</div>
        </div>

        <!-- Energy Overview -->
        <div class="energy-overview">
            <div class="energy-card excellent">
                <div class="energy-header">
                    <div class="energy-title">Total Power Consumption</div>
                    <div class="energy-icon">
                        <i class="fas fa-bolt"></i>
                    </div>
                </div>
                <div class="energy-value">2,847 kW</div>
                <div class="energy-details">
                    <div class="detail-item">
                        <span class="detail-label">Peak Load:</span>
                        <span class="detail-value">3,120 kW</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Average Load:</span>
                        <span class="detail-value">2,650 kW</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Load Factor:</span>
                        <span class="detail-value">89.2%</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Power Quality:</span>
                        <span class="detail-value">Excellent</span>
                    </div>
                </div>
                <div class="trend-indicator trend-down">
                    <i class="fas fa-arrow-down"></i>
                    <span>-3.2% vs yesterday</span>
                </div>
            </div>

            <div class="energy-card good">
                <div class="energy-header">
                    <div class="energy-title">Energy Efficiency</div>
                    <div class="energy-icon" style="background: linear-gradient(135deg, var(--info), var(--info-light));">
                        <i class="fas fa-leaf"></i>
                    </div>
                </div>
                <div class="energy-value">84.7%</div>
                <div class="energy-details">
                    <div class="detail-item">
                        <span class="detail-label">Target:</span>
                        <span class="detail-value">85.0%</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Best Practice:</span>
                        <span class="detail-value">87.5%</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Improvement:</span>
                        <span class="detail-value">2.8% potential</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value">Good</span>
                    </div>
                </div>
                <div class="trend-indicator trend-up">
                    <i class="fas fa-arrow-up"></i>
                    <span>+1.1% vs yesterday</span>
                </div>
            </div>

            <div class="energy-card warning">
                <div class="energy-header">
                    <div class="energy-title">Daily Energy Cost</div>
                    <div class="energy-icon" style="background: linear-gradient(135deg, var(--warning), var(--warning-light));">
                        <i class="fas fa-dollar-sign"></i>
                    </div>
                </div>
                <div class="energy-value">$8,934</div>
                <div class="energy-details">
                    <div class="detail-item">
                        <span class="detail-label">Budget:</span>
                        <span class="detail-value">$8,500</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Over Budget:</span>
                        <span class="detail-value">$434</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Rate:</span>
                        <span class="detail-value">$0.12/kWh</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value">Over Budget</span>
                    </div>
                </div>
                <div class="trend-indicator trend-up">
                    <i class="fas fa-arrow-up"></i>
                    <span>+5.1% vs yesterday</span>
                </div>
            </div>

            <div class="energy-card excellent">
                <div class="energy-header">
                    <div class="energy-title">Carbon Footprint</div>
                    <div class="energy-icon" style="background: linear-gradient(135deg, var(--success), var(--success-light));">
                        <i class="fas fa-seedling"></i>
                    </div>
                </div>
                <div class="energy-value">12.4 tCO₂</div>
                <div class="energy-details">
                    <div class="detail-item">
                        <span class="detail-label">Target:</span>
                        <span class="detail-value">13.0 tCO₂</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Reduction:</span>
                        <span class="detail-value">0.6 tCO₂</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Per kg Fiber:</span>
                        <span class="detail-value">3.6 kgCO₂</span>
                    </div>
                    <div class="detail-item">
                        <span class="detail-label">Status:</span>
                        <span class="detail-value">Below Target</span>
                    </div>
                </div>
                <div class="trend-indicator trend-down">
                    <i class="fas fa-arrow-down"></i>
                    <span>-4.6% vs yesterday</span>
                </div>
            </div>
        </div>

        <!-- Real-time Power Monitoring -->
        <div class="real-time-section">
            <h3 style="color: var(--primary-blue); margin-bottom: var(--space-4);">
                <i class="fas fa-tachometer-alt"></i> Real-time Power Monitoring
            </h3>
            <div class="realtime-grid">
                <div>
                    <div class="chart-container">
                        <canvas id="powerChart"></canvas>
                    </div>
                </div>
                <div class="realtime-stats">
                    <div class="power-gauge">
                        <div class="gauge-circle">
                            <div class="gauge-fill"></div>
                            <div class="gauge-center">
                                <div class="gauge-value">89.2%</div>
                                <div class="gauge-label">Load Factor</div>
                            </div>
                        </div>
                    </div>
                    <div class="realtime-stat">
                        <div class="stat-header">
                            <span class="stat-name">Voltage</span>
                            <span class="stat-trend trend-down">-0.1%</span>
                        </div>
                        <div class="stat-current">480.2 V</div>
                    </div>
                    <div class="realtime-stat">
                        <div class="stat-header">
                            <span class="stat-name">Current</span>
                            <span class="stat-trend trend-up">+2.3%</span>
                        </div>
                        <div class="stat-current">3,427 A</div>
                    </div>
                    <div class="realtime-stat">
                        <div class="stat-header">
                            <span class="stat-name">Power Factor</span>
                            <span class="stat-trend trend-neutral">0%</span>
                        </div>
                        <div class="stat-current">0.92</div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Equipment Energy Breakdown -->
        <div class="consumption-breakdown">
            <h3 style="color: var(--primary-blue); margin-bottom: var(--space-4);">
                <i class="fas fa-chart-pie"></i> Equipment Energy Consumption
            </h3>
            <div class="equipment-grid">
                <div class="equipment-card">
                    <div class="equipment-header">
                        <div class="equipment-name">Carbonization Furnace 1</div>
                        <div class="power-indicator power-on"></div>
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="metric-value">1,247 kW</div>
                            <div class="metric-label">Power</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">43.8%</div>
                            <div class="metric-label">% of Total</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">$3,892</div>
                            <div class="metric-label">Daily Cost</div>
                        </div>
                    </div>
                </div>

                <div class="equipment-card">
                    <div class="equipment-header">
                        <div class="equipment-name">Carbonization Furnace 2</div>
                        <div class="power-indicator power-on"></div>
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="metric-value">1,198 kW</div>
                            <div class="metric-label">Power</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">42.1%</div>
                            <div class="metric-label">% of Total</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">$3,739</div>
                            <div class="metric-label">Daily Cost</div>
                        </div>
                    </div>
                </div>

                <div class="equipment-card">
                    <div class="equipment-header">
                        <div class="equipment-name">Stabilization Furnace 1</div>
                        <div class="power-indicator power-on"></div>
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="metric-value">189 kW</div>
                            <div class="metric-label">Power</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">6.6%</div>
                            <div class="metric-label">% of Total</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">$590</div>
                            <div class="metric-label">Daily Cost</div>
                        </div>
                    </div>
                </div>

                <div class="equipment-card">
                    <div class="equipment-header">
                        <div class="equipment-name">Stabilization Furnace 2</div>
                        <div class="power-indicator power-standby"></div>
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="metric-value">45 kW</div>
                            <div class="metric-label">Power</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">1.6%</div>
                            <div class="metric-label">% of Total</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">$140</div>
                            <div class="metric-label">Daily Cost</div>
                        </div>
                    </div>
                </div>

                <div class="equipment-card">
                    <div class="equipment-header">
                        <div class="equipment-name">Spinning Units (4x)</div>
                        <div class="power-indicator power-on"></div>
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="metric-value">97 kW</div>
                            <div class="metric-label">Power</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">3.4%</div>
                            <div class="metric-label">% of Total</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">$302</div>
                            <div class="metric-label">Daily Cost</div>
                        </div>
                    </div>
                </div>

                <div class="equipment-card">
                    <div class="equipment-header">
                        <div class="equipment-name">Support Systems</div>
                        <div class="power-indicator power-on"></div>
                    </div>
                    <div class="equipment-metrics">
                        <div class="equipment-metric">
                            <div class="metric-value">71 kW</div>
                            <div class="metric-label">Power</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">2.5%</div>
                            <div class="metric-label">% of Total</div>
                        </div>
                        <div class="equipment-metric">
                            <div class="metric-value">$221</div>
                            <div class="metric-label">Daily Cost</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Efficiency Analysis -->
        <div class="efficiency-analysis">
            <h3 style="color: var(--primary-blue); margin-bottom: var(--space-4);">
                <i class="fas fa-chart-bar"></i> Efficiency Analysis
            </h3>
            
            <div class="efficiency-tabs">
                <div class="efficiency-tab active" onclick="switchEfficiencyTab(0)">Overall Efficiency</div>
                <div class="efficiency-tab" onclick="switchEfficiencyTab(1)">Equipment Analysis</div>
                <div class="efficiency-tab" onclick="switchEfficiencyTab(2)">Historical Trends</div>
            </div>

            <div class="efficiency-content active" id="efficiency-0">
                <div class="efficiency-metrics">
                    <div class="efficiency-card">
                        <div class="efficiency-score score-good">84.7%</div>
                        <div style="color: var(--gray-600); margin-bottom: var(--space-2);">Overall Plant Efficiency</div>
                        <div style="font-size: 0.8rem; color: var(--info);">Target: 85.0%</div>
                    </div>
                    <div class="efficiency-card">
                        <div class="efficiency-score score-excellent">92.1%</div>
                        <div style="color: var(--gray-600); margin-bottom: var(--space-2);">Power Factor</div>
                        <div style="font-size: 0.8rem; color: var(--success);">Excellent Rating</div>
                    </div>
                    <div class="efficiency-card">
                        <div class="efficiency-score score-average">76.3%</div>
                        <div style="color: var(--gray-600); margin-bottom: var(--space-2);">Heat Recovery</div>
                        <div style="font-size: 0.8rem; color: var(--warning);">Improvement Needed</div>
                    </div>
                    <div class="efficiency-card">
                        <div class="efficiency-score score-good">88.9%</div>
                        <div style="color: var(--gray-600); margin-bottom: var(--space-2);">Motor Efficiency</div>
                        <div style="font-size: 0.8rem; color: var(--info);">Above Average</div>
                    </div>
                </div>
                <div class="chart-container">
                    <canvas id="efficiencyChart"></canvas>
                </div>
            </div>

            <div class="efficiency-content" id="efficiency-1">
                <div class="chart-container">
                    <canvas id="equipmentEfficiencyChart"></canvas>
                </div>
            </div>

            <div class="efficiency-content" id="efficiency-2">
                <div class="chart-container">
                    <canvas id="trendsChart"></canvas>
                </div>
            </div>
        </div>

        <!-- Cost Analysis -->
        <div class="cost-analysis">
            <h3 style="color: var(--primary-blue); margin-bottom: var(--space-4);">
                <i class="fas fa-calculator"></i> Cost Analysis & Forecasting
            </h3>
            <div class="cost-grid">
                <div class="cost-card">
                    <div class="cost-header">
                        <div class="cost-title">Daily Energy Cost</div>
                        <div class="cost-period">Today</div>
                    </div>
                    <div class="cost-amount">$8,934</div>
                    <div class="cost-breakdown">
                        <div class="breakdown-item">
                            <span>Peak Hours (6AM-10PM):</span>
                            <span>$6,247 (70%)</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Off-Peak Hours:</span>
                            <span>$2,687 (30%)</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Demand Charges:</span>
                            <span>$1,892</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Power Factor Penalty:</span>
                            <span>$108</span>
                        </div>
                    </div>
                </div>

                <div class="cost-card">
                    <div class="cost-header">
                        <div class="cost-title">Weekly Projection</div>
                        <div class="cost-period" style="background: var(--info);">7 Days</div>
                    </div>
                    <div class="cost-amount" style="color: var(--info);">$62,538</div>
                    <div class="cost-breakdown">
                        <div class="breakdown-item">
                            <span>Current Trend:</span>
                            <span>$62,538</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Budget Target:</span>
                            <span>$59,500</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Over Budget:</span>
                            <span style="color: var(--error);">$3,038</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Confidence:</span>
                            <span>87%</span>
                        </div>
                    </div>
                </div>

                <div class="cost-card">
                    <div class="cost-header">
                        <div class="cost-title">Monthly Forecast</div>
                        <div class="cost-period" style="background: var(--success);">30 Days</div>
                    </div>
                    <div class="cost-amount" style="color: var(--success);">$268,020</div>
                    <div class="cost-breakdown">
                        <div class="breakdown-item">
                            <span>Production-based:</span>
                            <span>$268,020</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Seasonal Adjustment:</span>
                            <span>+2.3%</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Expected Range:</span>
                            <span>$255k - $281k</span>
                        </div>
                        <div class="breakdown-item">
                            <span>Confidence:</span>
                            <span>78%</span>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Optimization Recommendations -->
        <div class="optimization-section">
            <h3 style="color: var(--success); margin-bottom: var(--space-4);">
                <i class="fas fa-lightbulb"></i> Energy Optimization Recommendations
            </h3>
            <div class="optimization-grid">
                <div class="optimization-card">
                    <div class="optimization-header">
                        <div class="optimization-title">Heat Recovery Enhancement</div>
                        <div class="savings-potential">Save $1,200/day</div>
                    </div>
                    <div class="optimization-description">
                        Install waste heat recovery systems on carbonization furnaces. Current heat recovery efficiency is only 76.3%, with potential to reach 89% through improved heat exchangers.
                    </div>
                    <div class="optimization-actions">
                        <strong style="display: block; margin-bottom: var(--space-2);">Recommended Actions:</strong>
                        <ul class="action-list">
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Upgrade heat exchangers on CF-001 and CF-002
                            </li>
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Install heat recovery ventilation system
                            </li>
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Implement preheating for incoming air
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="optimization-card">
                    <div class="optimization-header">
                        <div class="optimization-title">Load Shifting Strategy</div>
                        <div class="savings-potential">Save $850/day</div>
                    </div>
                    <div class="optimization-description">
                        Optimize production schedule to utilize more off-peak electricity rates. Current peak/off-peak ratio is 70/30, target is 55/45 through intelligent scheduling.
                    </div>
                    <div class="optimization-actions">
                        <strong style="display: block; margin-bottom: var(--space-2);">Recommended Actions:</strong>
                        <ul class="action-list">
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Shift non-critical operations to off-peak hours
                            </li>
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Implement automated load scheduling system
                            </li>
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Install energy storage for peak shaving
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="optimization-card">
                    <div class="optimization-header">
                        <div class="optimization-title">Motor Efficiency Upgrade</div>
                        <div class="savings-potential">Save $420/day</div>
                    </div>
                    <div class="optimization-description">
                        Replace older motors with high-efficiency models. 12 motors are below 85% efficiency and could benefit from upgrade to IE3 or IE4 class motors.
                    </div>
                    <div class="optimization-actions">
                        <strong style="display: block; margin-bottom: var(--space-2);">Recommended Actions:</strong>
                        <ul class="action-list">
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Priority upgrade of 6 largest motors
                            </li>
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Install variable frequency drives (VFDs)
                            </li>
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Implement motor condition monitoring
                            </li>
                        </ul>
                    </div>
                </div>

                <div class="optimization-card">
                    <div class="optimization-header">
                        <div class="optimization-title">Power Factor Correction</div>
                        <div class="savings-potential">Save $320/day</div>
                    </div>
                    <div class="optimization-description">
                        Improve power factor from 0.92 to 0.95+ through capacitor bank installation. This will reduce reactive power penalties and improve overall system efficiency.
                    </div>
                    <div class="optimization-actions">
                        <strong style="display: block; margin-bottom: var(--space-2);">Recommended Actions:</strong>
                        <ul class="action-list">
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Install automatic capacitor banks
                            </li>
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Monitor reactive power consumption
                            </li>
                            <li class="action-item">
                                <i class="fas fa-check"></i>
                                Regular power quality assessment
                            </li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Energy Alerts -->
        <div class="alerts-panel">
            <h3 style="color: var(--warning); margin-bottom: var(--space-4);">
                <i class="fas fa-exclamation-triangle"></i> Energy Alerts & Notifications
            </h3>
            <div class="energy-alerts">
                <div class="energy-alert">
                    <div class="alert-severity severity-high">
                        <i class="fas fa-exclamation-triangle"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">High Peak Demand Detected</div>
                        <div class="alert-description">Current demand of 3,120 kW exceeds contract demand by 8%. Consider load shedding to avoid penalty charges.</div>
                    </div>
                    <div style="font-size: 0.8rem; color: var(--gray-500);">5 min ago</div>
                </div>

                <div class="energy-alert">
                    <div class="alert-severity severity-medium">
                        <i class="fas fa-chart-line"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">Energy Budget Variance</div>
                        <div class="alert-description">Daily energy cost is 5.1% over budget. Weekly projection shows continued overspend trend.</div>
                    </div>
                    <div style="font-size: 0.8rem; color: var(--gray-500);">12 min ago</div>
                </div>

                <div class="energy-alert">
                    <div class="alert-severity severity-low">
                        <i class="fas fa-leaf"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">Carbon Footprint Achievement</div>
                        <div class="alert-description">Daily carbon emissions are 4.6% below target. Excellent progress toward sustainability goals.</div>
                    </div>
                    <div style="font-size: 0.8rem; color: var(--gray-500);">1 hour ago</div>
                </div>

                <div class="energy-alert">
                    <div class="alert-severity severity-medium">
                        <i class="fas fa-tools"></i>
                    </div>
                    <div class="alert-content">
                        <div class="alert-title">Heat Recovery System Maintenance</div>
                        <div class="alert-description">Heat recovery efficiency on CF-002 has dropped to 71%. Schedule maintenance to restore optimal performance.</div>
                    </div>
                    <div style="font-size: 0.8rem; color: var(--gray-500);">2 hours ago</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentEfficiencyTab = 0;

        // Switch efficiency tabs
        function switchEfficiencyTab(tabIndex) {
            document.querySelectorAll('.efficiency-tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.efficiency-content').forEach(content => content.classList.remove('active'));
            
            document.querySelectorAll('.efficiency-tab')[tabIndex].classList.add('active');
            document.getElementById(`efficiency-${tabIndex}`).classList.add('active');
            
            currentEfficiencyTab = tabIndex;
        }

        // Initialize charts
        function initEnergyCharts() {
            // Real-time Power Chart
            const powerCtx = document.getElementById('powerChart').getContext('2d');
            new Chart(powerCtx, {
                type: 'line',
                data: {
                    labels: Array.from({length: 24}, (_, i) => `${String(i).padStart(2, '0')}:00`),
                    datasets: [{
                        label: 'Power Consumption (kW)',
                        data: [2400, 2350, 2300, 2280, 2320, 2450, 2650, 2800, 2900, 2850, 2820, 2780, 
                               2850, 2900, 2950, 2880, 2820, 2750, 2680, 2620, 2580, 2520, 2480, 2450],
                        borderColor: '#667eea',
                        backgroundColor: 'rgba(102, 126, 234, 0.1)',
                        tension: 0.4,
                        fill: true
                    }, {
                        label: 'Target Load (kW)',
                        data: Array(24).fill(2650),
                        borderColor: '#10b981',
                        backgroundColor: 'transparent',
                        borderDash: [5, 5],
                        pointRadius: 0
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'top' }
                    },
                    scales: {
                        y: { 
                            beginAtZero: false,
                            min: 2000,
                            title: { display: true, text: 'Power (kW)' }
                        }
                    }
                }
            });

            // Efficiency Chart
            const efficiencyCtx = document.getElementById('efficiencyChart').getContext('2d');
            new Chart(efficiencyCtx, {
                type: 'doughnut',
                data: {
                    labels: ['Efficient Usage', 'Heat Loss', 'Motor Losses', 'Other Losses'],
                    datasets: [{
                        data: [84.7, 8.2, 4.1, 3.0],
                        backgroundColor: [
                            '#10b981',
                            '#f59e0b',
                            '#ef4444',
                            '#6b7280'
                        ],
                        borderWidth: 2,
                        borderColor: '#ffffff'
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    plugins: {
                        legend: { position: 'bottom' }
                    }
                }
            });
        }

        // Simulate real-time updates
        function updateRealTimeData() {
            // Simulate power consumption fluctuation
            const currentPower = 2847 + (Math.random() - 0.5) * 100;
            document.querySelector('.energy-value').textContent = Math.round(currentPower) + ' kW';
            
            // Update gauge
            const loadFactor = 85 + (Math.random() - 0.5) * 10;
            document.querySelector('.gauge-value').textContent = loadFactor.toFixed(1) + '%';
            
            // Update other real-time values
            const voltage = 480 + (Math.random() - 0.5) * 5;
            const current = 3400 + (Math.random() - 0.5) * 200;
            
            const voltageElements = document.querySelectorAll('.realtime-stat .stat-current');
            if (voltageElements[0]) voltageElements[0].textContent = voltage.toFixed(1) + ' V';
            if (voltageElements[1]) voltageElements[1].textContent = Math.round(current) + ' A';
        }

        // Initialize on page load
        document.addEventListener('DOMContentLoaded', function() {
            initEnergyCharts();
            
            // Start real-time updates
            setInterval(updateRealTimeData, 5000);
            
            // Initial data update
            updateRealTimeData();
        });

        // Simulate power fluctuations
        setInterval(() => {
            updateRealTimeData();
        }, 5000);
    </script>
</body>
</html>